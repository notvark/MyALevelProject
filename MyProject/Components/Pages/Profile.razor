@page "/Home/Profile/{userName}"

@using MyProject.Context
@using MyProject.Model;
@using Microsoft.AspNetCore.Http
@using Microsoft.AspNetCore.Identity
@using Microsoft.AspNetCore.Components.Authorization
@inherits LayoutComponentBase

@inject PostProvider postProvider
@inject PostCommentProvider postCommentProvider
@inject UserManager<User> userManager
@inject IHttpContextAccessor httpContextAccessor
@inject NavigationManager NavigationManager
@inject FollowingProvider followingProvider

<div class="container mt-4 custom">
    <!-- Profile Card -->
    <div class="card border-0">
        <div class="card-body custom-primary-background-color">
            <div class="row align-items-center">
                <!-- Profile Picture -->
                <div class="col-auto">
                    <img src="@(!string.IsNullOrEmpty(searchedUser.ProfilePicture) ? searchedUser.ProfilePicture : "/Images for R2_0/Default_pfp.png")"
                         alt="@searchedUser.UserName" class="rounded-circle me-3" style="width: 150px; height: 150px;">
                </div>
                <!-- User Information and Stats -->
                <div class="col">
                    <div class="custom-primary-white-text-color">
                        <h2 class="mb-1">@searchedUser.UserName</h2>
                        <p class="mb-3">@(!string.IsNullOrEmpty(searchedUser.Biography) ? searchedUser.Biography : "[NULL]")</p>
                    </div>

                    <!-- Stats Section -->
                    <div class="d-flex gap-5">
                        <!-- Followers -->
                        <div class="custom-primary-white-text-color text-center">
                            <h5 class="mb-0">Followers</h5>
                            <p class="mb-0">@followersOfSearchedUser</p>
                        </div>
                        <!-- Following -->
                        <div class="custom-primary-white-text-color text-center">
                            <h5 class="mb-0">Following</h5>
                            <p class="mb-0">@followingOfSearchedUser</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


@code {
    private User User { get; set; } = new();
    private User searchedUser = new User();
    private string feedbackMessage;
    private bool isSuccessful;
    private int followingUsers;

    [Parameter]
    public string userName { get; set; }

    protected override async Task OnInitializedAsync()
    {
        searchedUser = await userManager.FindByNameAsync(userName);
    }

    private async Task ReturnFollowers(User user)
    {
        return await followingProvider.
    }

    private async Task ReturnFollowers(User user)
    {
        return;
    }


}
